(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{I3:()=>Z,NL:()=>P,ZT:()=>m,dm:()=>S,dx:()=>v,mo:()=>b,ZH:()=>T,Qn:()=>L});var t=function(e,t){t.classList.remove(Z.errorClass);var n=e.querySelector(".".concat(t.id,"-error"));n.classList.add("popup__input_transparent_text"),n.textContent=""},n=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.classList.remove(Z.inactiveButtonClass):t.classList.add(Z.inactiveButtonClass)};function o(e){e.currentTarget===e.target&&c(document.querySelector(".popup_is-opened"))}function r(e){"Escape"===e.key&&c(document.querySelector(".popup_is-opened"))}function c(e){e.classList.remove("popup_is-opened"),window.removeEventListener("keyup",r),e.removeEventListener("click",o),null!=e.querySelector(".popup__form")&&function(e){var n=e.querySelector(Z.formSelector);Array.from(n.querySelectorAll(Z.inputSelector)).forEach((function(e){t(n,e)}))}(e)}function i(e){e.classList.add("popup_is-opened"),window.addEventListener("keyup",r),e.addEventListener("click",o)}function u(e){e.target.classList.toggle("card__like-button_is-active")}function a(e,t,n,o){var r=document.querySelector("#card-template").content.querySelector(".places__item").cloneNode(!0),c=r.querySelector(".card__image"),i=r.querySelector(".card__title");return c.src=e.link,c.alt=e.name,i.textContent=e.name,r.querySelector(".card__delete-button").addEventListener("click",(function(e){n(r)})),c.addEventListener("click",(function(e){o(c)})),r.querySelector(".card__like-button").addEventListener("click",t),r}function l(e){e.remove()}document.querySelector(".content").querySelector(".places__list");var s=function(e){return"url("+e+")"},p="936197d7-9c28-4a02-b461-a2e30a81b6a7",d=function(e){return fetch(e,{headers:{authorization:p}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка: ".concat(e))}))},_=function(e,t){fetch(t,{method:"PATCH",headers:{authorization:p,"Content-Type":"application/json"},body:JSON.stringify(e)})},f="wff-cohort-21",v="https://nomoreparties.co/v1/".concat(f,"/users/me"),m="https://nomoreparties.co/v1/".concat(f,"/cards"),y=document.querySelector(".content"),S=y.querySelector(".places__list"),q=y.querySelector(".profile__info"),L=q.querySelector(".profile__title"),b=q.querySelector(".profile__description"),g=y.querySelector(".profile__edit-button"),k=document.querySelector(".popup_type_edit"),E=k.querySelector(".popup__close"),h=document.forms["edit-profile"],C=h.elements.profile__title,x=h.elements.profile__description;C.value=L.textContent,x.value=b.textContent,g.addEventListener("click",(function(e){i(k),C.value=L.textContent,x.value=b.textContent})),h.addEventListener("submit",(function(e){e.preventDefault(),L.textContent=C.value,b.textContent=x.value,function(e,t){_({name:e,about:t},v)}(C.value,x.value),c(k)})),E.addEventListener("click",(function(e){c(k)}));var w=y.querySelector(".profile__add-button"),A=document.querySelector(".popup_type_new-card"),j=A.querySelector(".popup__close"),B=document.forms["new-place"],D=B.elements["place-name"],I=B.elements.link,M={name:"",link:""};w.addEventListener("click",(function(e){i(A)})),j.addEventListener("click",(function(e){c(A)})),B.addEventListener("submit",(function(e){e.preventDefault(),M.name=D.value,M.link=I.value;var t=a(M,u,l,P);S.prepend(t),c(A),B.reset()}));var O=document.querySelector(".popup_type_image");function P(e){var t=O.querySelector(".popup__image"),n=O.querySelector(".popup__caption");t.src=e.src,t.alt=e.alt,n.textContent=e.alt,i(O)}O.querySelector(".popup__close").addEventListener("click",(function(e){c(O)}));var T=document.querySelector(".profile__image"),N=document.querySelector(".popup_type_profile-image-edit"),z=N.querySelector(".popup__close"),H=document.forms["edit-profile-image"],V=H.elements["link-to-image"];T.addEventListener("click",(function(e){var t;i(N),V.value=(t=T.style.backgroundImage).substring(5,t.length-2)})),z.addEventListener("click",(function(e){c(N)})),H.addEventListener("submit",(function(e){var t;e.preventDefault(),T.style.backgroundImage=s(V.value),t=V.value,_({avatar:t},v),c(N)}));var Z={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};d(v).then((function(e){L.textContent=e.name,b.textContent=e.about,T.style.backgroundImage=s(e.avatar)})).catch((function(e){console.log(e)})),d(m).then((function(e){e.forEach((function(e){var t=a(e,u,l,P);S.append(t)}))})),Array.from(document.querySelectorAll(Z.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var o=Array.from(e.querySelectorAll(Z.inputSelector)),r=e.querySelector(Z.submitButtonSelector);n(o,r),o.forEach((function(c){c.addEventListener("input",(function(){(function(e,n){!function(e){e.validity.patternMismatch?e.setCustomValidity(e.dataset.patternMismatchErrorMessage):e.setCustomValidity("")}(n),n.validity.valid?t(e,n):function(e,t,n){t.classList.add(Z.errorClass);var o=e.querySelector(".".concat(t.id,"-error"));o.classList.remove("popup__input_transparent_text"),o.textContent=n}(e,n,n.validationMessage)})(e,c),n(o,r)}))}))}(e)}))})();