(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){e.target.classList.toggle("card__like-button_is-active")}function n(e,t,n,r){var o=document.querySelector("#card-template").content.querySelector(".places__item").cloneNode(!0),c=o.querySelector(".card__image"),i=o.querySelector(".card__title");return c.src=e.link,c.alt=e.name,i.textContent=e.name,o.querySelector(".card__delete-button").addEventListener("click",(function(e){n(o)})),c.addEventListener("click",(function(e){r(c)})),o.querySelector(".card__like-button").addEventListener("click",t),o}function r(e){e.remove()}e.d({},{I:()=>P}),document.querySelector(".content").querySelector(".places__list");var o=function(e,t){t.classList.remove(P.errorClass);var n=e.querySelector(".".concat(t.id,"-error"));n.classList.add("popup__input_transparent_text"),n.textContent=""},c=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.classList.remove(P.inactiveButtonClass):t.classList.add(P.inactiveButtonClass)};function i(e){e.currentTarget===e.target&&l(document.querySelector(".popup_is-opened"))}function a(e){"Escape"===e.key&&l(document.querySelector(".popup_is-opened"))}function l(e){e.classList.remove("popup_is-opened"),window.removeEventListener("keyup",a),e.removeEventListener("click",i),null!=e.querySelector(".popup__form")&&function(e){var t=e.querySelector(P.formSelector);Array.from(t.querySelectorAll(P.inputSelector)).forEach((function(e){o(t,e)}))}(e)}function u(e){e.classList.add("popup_is-opened"),window.addEventListener("keyup",a),e.addEventListener("click",i)}var s=function(e){return"url("+e+")"},p=function(){var e=document.querySelector(".profile__info"),t=e.querySelector(".profile__title"),n=e.querySelector(".profile__description"),r=document.querySelector(".profile__image");return fetch("https://nomoreparties.co/v1/wff-cohort-21/users/me ",{headers:{authorization:"936197d7-9c28-4a02-b461-a2e30a81b6a7"}}).then((function(e){return e.json()})).then((function(e){t.textContent=e.name,n.textContent=e.about,r.style.backgroundImage=s(e.avatar)})).error((function(e){console.log(e)}))},d=document.querySelector(".content"),_=d.querySelector(".places__list");[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var o=n(e,t,r,B);_.append(o)}));var f=d.querySelector(".profile__info"),m=f.querySelector(".profile__title"),v=f.querySelector(".profile__description"),y=d.querySelector(".profile__edit-button"),S=document.querySelector(".popup_type_edit"),q=S.querySelector(".popup__close"),k=document.forms["edit-profile"],g=k.elements.profile__title,b=k.elements.profile__description;g.value=m.textContent,b.value=v.textContent,y.addEventListener("click",(function(e){u(S),g.value=m.textContent,b.value=v.textContent})),k.addEventListener("submit",(function(e){e.preventDefault(),m.textContent=g.value,v.textContent=b.value,l(S)})),q.addEventListener("click",(function(e){l(S)}));var L=d.querySelector(".profile__add-button"),h=document.querySelector(".popup_type_new-card"),E=h.querySelector(".popup__close"),C=document.forms["new-place"],x=C.elements["place-name"],j=C.elements.link,w={name:"",link:""};L.addEventListener("click",(function(e){u(h)})),E.addEventListener("click",(function(e){l(h)})),C.addEventListener("submit",(function(e){e.preventDefault(),w.name=x.value,w.link=j.value;var o=n(w,t,r,B);_.prepend(o),l(h),C.reset()}));var A=document.querySelector(".popup_type_image");function B(e){var t=A.querySelector(".popup__image"),n=A.querySelector(".popup__caption");t.src=e.src,t.alt=e.alt,n.textContent=e.alt,u(A)}A.querySelector(".popup__close").addEventListener("click",(function(e){l(A)}));var D=document.querySelector(".profile__image"),I=document.querySelector(".popup_type_profile-image-edit"),M=I.querySelector(".popup__close"),O=document.forms["edit-profile-image"],z=O.elements["link-to-image"];D.addEventListener("click",(function(e){var t;u(I),z.value=(t=D.style.backgroundImage).substring(5,t.length-2)})),M.addEventListener("click",(function(e){l(I)})),O.addEventListener("submit",(function(e){e.preventDefault(),D.style.backgroundImage=s(z.value),l(I)}));var P={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};console.log("promise",p()),console.log(".then",p.then()),Array.from(document.querySelectorAll(P.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(P.inputSelector)),n=e.querySelector(P.submitButtonSelector);c(t,n),t.forEach((function(r){r.addEventListener("input",(function(){(function(e,t){!function(e){e.validity.patternMismatch?e.setCustomValidity(e.dataset.patternMismatchErrorMessage):e.setCustomValidity("")}(t),t.validity.valid?o(e,t):function(e,t,n){t.classList.add(P.errorClass);var r=e.querySelector(".".concat(t.id,"-error"));r.classList.remove("popup__input_transparent_text"),r.textContent=n}(e,t,t.validationMessage)})(e,r),c(t,n)}))}))}(e)}))})();